乐观锁机制采取了更加宽松的加锁机制。悲观锁大多数情况下依靠数据库的锁机制实现，以保证操作最大程度的独占性。



悲观锁:数据库读写锁

读锁,读锁是共享的,互相不阻塞的.

写锁:排他的,一个写锁会阻塞其他的写锁和读锁





```
MySQL有三种锁的级别：页级、表级、行级。

MyISAM和MEMORY存储引擎采用的是表级锁（table-level locking）；BDB存储引擎采用的是页面锁（page-level
locking），但也支持表级锁；InnoDB存储引擎既支持行级锁（row-level locking），也支持表级锁，但默认情况下是采用行级锁。
```

```
MySQL这3种锁的特性可大致归纳如下：
表级锁：开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高,并发度最低。
行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低,并发度也最高。
```

乐观锁

基于数据版本（Version）记录机制实现

update:修改.
插入的哪一行新纪录保存当前系统版本号作为行版本号,
当前系统版本号作为原来行的行删除标识.



版本号小于当前行的版本号,这次更新会被拒绝
提交数据的时候，会判断数据库中的当前版本号和第一次取数据时的版本号是否一致，如果两个版本号相等，则更新，否则就认为数据过期，返回错误信息。